/home/guohuajiaohuazi/anaconda3/lib/python3.6/site-packages/sklearn/cross_validation.py:41: DeprecationWarning: This module was deprecated in version 0.18 in favor of the model_selection module into which all the refactored classes and functions are moved. Also note that the interface of the new CV iterators are different from that of this module. This module will be removed in 0.20.
  "This module will be removed in 0.20.", DeprecationWarning)
/home/guohuajiaohuazi/anaconda3/lib/python3.6/site-packages/lightgbm/basic.py:1036: UserWarning: Using categorical_feature in Dataset.
  warnings.warn('Using categorical_feature in Dataset.')
/home/guohuajiaohuazi/anaconda3/lib/python3.6/site-packages/lightgbm/basic.py:681: UserWarning: categorical_feature in param dict is overrided.
  warnings.warn('categorical_feature in param dict is overrided.')
loading train data... 144903890 184903890
loading test data...
Extracting new features...
Preprocessing click_time...
selcols ['ip', 'app', 'device', 'os'] QQ NC
selcols ['ip', 'channel'] QQ 4
selcols ['ip', 'day', 'hour'] QQ 4
selcols ['ip', 'app'] QQ 4
selcols ['ip', 'device'] QQ 4
selcols ['ip', 'os'] QQ 5
selcols ['ip', 'device', 'os', 'app'] QQ 4
selcols ['ip', 'day', 'hour', 'channel'] QQ 0
selcols ['ip', 'app', 'channel'] QQ 0
selcols ['ip', 'app', 'os', 'channel'] QQ 0
variables and data type: 
<class 'pandas.core.frame.DataFrame'>
Int64Index: 58790469 entries, 0 to 58790468
Data columns (total 20 columns):
app                      uint16
channel                  uint16
click_id                 float64
click_time               int32
device                   uint16
ip                       uint32
is_attributed            float64
os                       uint16
hour                     uint8
day                      uint8
ip_app_device_os_NC      float32
ip_channel_4             int64
ip_day_hour_4            int64
ip_app_4                 int64
ip_device_4              int64
ip_os_5                  int64
ip_device_os_app_4       int64
ip_day_hour_channel_0    int64
ip_app_channel_0         int64
ip_app_os_channel_0      int64
dtypes: float32(1), float64(2), int32(1), int64(9), uint16(4), uint32(1), uint8(2)
memory usage: 6.5 GB
predictors ['ip_app_device_os_NC', 'ip_channel_4', 'ip_day_hour_4', 'ip_app_4', 'ip_device_4', 'ip_os_5', 'ip_device_os_app_4', 'ip_day_hour_channel_0', 'ip_app_channel_0', 'ip_app_os_channel_0', 'app', 'os', 'channel', 'hour']
train size:  37500000
valid size:  2500000
test size :  18790469
Training...
preparing validation datasets
Training until validation scores don't improve for 30 rounds.
[10]	train's auc: 0.968996	valid's auc: 0.976599
[20]	train's auc: 0.974403	valid's auc: 0.980971
[30]	train's auc: 0.977965	valid's auc: 0.984342
[40]	train's auc: 0.979449	valid's auc: 0.985951
[50]	train's auc: 0.980277	valid's auc: 0.986942
[60]	train's auc: 0.981013	valid's auc: 0.987536
[70]	train's auc: 0.981499	valid's auc: 0.987928
[80]	train's auc: 0.981851	valid's auc: 0.988168
[90]	train's auc: 0.982149	valid's auc: 0.988242
[100]	train's auc: 0.982364	valid's auc: 0.988457
[110]	train's auc: 0.9826	valid's auc: 0.988468
[120]	train's auc: 0.982768	valid's auc: 0.988449
[130]	train's auc: 0.982934	valid's auc: 0.988537
[140]	train's auc: 0.983079	valid's auc: 0.988571
[150]	train's auc: 0.983238	valid's auc: 0.988693
[160]	train's auc: 0.983355	valid's auc: 0.988792
[170]	train's auc: 0.983464	valid's auc: 0.988929
[180]	train's auc: 0.983564	valid's auc: 0.988953
[190]	train's auc: 0.983689	valid's auc: 0.988959
[200]	train's auc: 0.983782	valid's auc: 0.988965
[210]	train's auc: 0.983889	valid's auc: 0.988953
[220]	train's auc: 0.983974	valid's auc: 0.989018
[230]	train's auc: 0.984039	valid's auc: 0.988995
[240]	train's auc: 0.984117	valid's auc: 0.989027
[250]	train's auc: 0.984196	valid's auc: 0.989056
[260]	train's auc: 0.984272	valid's auc: 0.989077
[270]	train's auc: 0.98433	valid's auc: 0.989109
[280]	train's auc: 0.984387	valid's auc: 0.98913
[290]	train's auc: 0.984461	valid's auc: 0.989131
[300]	train's auc: 0.984538	valid's auc: 0.989172
[310]	train's auc: 0.984577	valid's auc: 0.989192
[320]	train's auc: 0.984629	valid's auc: 0.989123
[330]	train's auc: 0.984672	valid's auc: 0.989161
[340]	train's auc: 0.984729	valid's auc: 0.989218
[350]	train's auc: 0.984766	valid's auc: 0.989254
[360]	train's auc: 0.98481	valid's auc: 0.98924
[370]	train's auc: 0.984868	valid's auc: 0.989299
[380]	train's auc: 0.98492	valid's auc: 0.989343
[390]	train's auc: 0.984965	valid's auc: 0.989325
[400]	train's auc: 0.985019	valid's auc: 0.989375
[410]	train's auc: 0.985062	valid's auc: 0.989409
[420]	train's auc: 0.985106	valid's auc: 0.989433
[430]	train's auc: 0.985159	valid's auc: 0.989456
[440]	train's auc: 0.985191	valid's auc: 0.989446
[450]	train's auc: 0.985234	valid's auc: 0.989477
[460]	train's auc: 0.985273	valid's auc: 0.989495
[470]	train's auc: 0.9853	valid's auc: 0.989515
[480]	train's auc: 0.985332	valid's auc: 0.989504
[490]	train's auc: 0.985361	valid's auc: 0.98951
[500]	train's auc: 0.985418	valid's auc: 0.989533
[510]	train's auc: 0.98546	valid's auc: 0.989527
[520]	train's auc: 0.985503	valid's auc: 0.989478
[530]	train's auc: 0.985539	valid's auc: 0.989484
Early stopping, best iteration is:
[506]	train's auc: 0.985443	valid's auc: 0.989554

Model Report
bst1.best_iteration:  506
auc: 0.989554416827224
[4283.981684446335]: model training time
Plot feature importances...
Predicting...
writing...
done...
