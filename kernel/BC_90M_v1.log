/home/guohuajiaohuazi/anaconda3/lib/python3.6/site-packages/sklearn/cross_validation.py:41: DeprecationWarning: This module was deprecated in version 0.18 in favor of the model_selection module into which all the refactored classes and functions are moved. Also note that the interface of the new CV iterators are different from that of this module. This module will be removed in 0.20.
  "This module will be removed in 0.20.", DeprecationWarning)
/home/guohuajiaohuazi/anaconda3/lib/python3.6/site-packages/lightgbm/basic.py:1036: UserWarning: Using categorical_feature in Dataset.
  warnings.warn('Using categorical_feature in Dataset.')
/home/guohuajiaohuazi/anaconda3/lib/python3.6/site-packages/lightgbm/basic.py:681: UserWarning: categorical_feature in param dict is overrided.
  warnings.warn('categorical_feature in param dict is overrided.')
loading train data... 94903890 184903890
loading test data...
Extracting new features...
>> Calculating confidence-weighted rate for: ['channel'].
   Saving to: channel_confRate. Group Max /Mean / Median / Min: 7827693 / 471204.19 / 82104.0 / 1
(90000000, 9)
shape of train:  (90000000, 9)
shape of test:  (18790469, 9)
selcols ['ip', 'channel'] QQ 4
selcols ['ip', 'device', 'os', 'app'] QQ 4
selcols ['ip', 'app', 'device', 'os'] QQ NC
variables and data type: 
<class 'pandas.core.frame.DataFrame'>
Int64Index: 108790469 entries, 0 to 108790468
Data columns (total 13 columns):
app                    uint16
channel                uint16
channel_confRate       float64
click_id               float64
click_time             int32
device                 uint16
hour                   uint8
ip                     uint32
is_attributed          float64
os                     uint16
ip_channel_4           int64
ip_device_os_app_4     int64
ip_app_device_os_NC    float32
dtypes: float32(1), float64(3), int32(1), int64(2), uint16(4), uint32(1), uint8(1)
memory usage: 7.0 GB
predictors ['channel_confRate', 'ip_channel_4', 'ip_device_os_app_4', 'ip_app_device_os_NC', 'ip', 'app', 'os', 'channel', 'device', 'hour']
train size:  87500000
valid size:  2500000
test size :  18790469
Training...
preparing validation datasets
Training until validation scores don't improve for 30 rounds.
[10]	train's auc: 0.96617	valid's auc: 0.975063
[20]	train's auc: 0.970236	valid's auc: 0.977511
[30]	train's auc: 0.972641	valid's auc: 0.978737
[40]	train's auc: 0.97501	valid's auc: 0.980612
[50]	train's auc: 0.976392	valid's auc: 0.981333
[60]	train's auc: 0.977487	valid's auc: 0.982289
[70]	train's auc: 0.978417	valid's auc: 0.983122
[80]	train's auc: 0.979086	valid's auc: 0.983952
[90]	train's auc: 0.979687	valid's auc: 0.984829
[100]	train's auc: 0.980146	valid's auc: 0.985508
[110]	train's auc: 0.980594	valid's auc: 0.985947
[120]	train's auc: 0.980915	valid's auc: 0.98638
[130]	train's auc: 0.981158	valid's auc: 0.986671
[140]	train's auc: 0.981398	valid's auc: 0.986909
[150]	train's auc: 0.981631	valid's auc: 0.987145
[160]	train's auc: 0.981812	valid's auc: 0.9874
[170]	train's auc: 0.981983	valid's auc: 0.987559
[180]	train's auc: 0.982143	valid's auc: 0.987862
[190]	train's auc: 0.982277	valid's auc: 0.987961
[200]	train's auc: 0.982408	valid's auc: 0.987913
[210]	train's auc: 0.982547	valid's auc: 0.988048
[220]	train's auc: 0.982665	valid's auc: 0.988267
[230]	train's auc: 0.98278	valid's auc: 0.988385
[240]	train's auc: 0.982867	valid's auc: 0.988571
[250]	train's auc: 0.982955	valid's auc: 0.988587
[260]	train's auc: 0.983039	valid's auc: 0.988621
[270]	train's auc: 0.983105	valid's auc: 0.988727
[280]	train's auc: 0.98318	valid's auc: 0.988792
[290]	train's auc: 0.983252	valid's auc: 0.98888
[300]	train's auc: 0.983322	valid's auc: 0.98895
[310]	train's auc: 0.983383	valid's auc: 0.989031
[320]	train's auc: 0.983457	valid's auc: 0.989104
[330]	train's auc: 0.983528	valid's auc: 0.989183
[340]	train's auc: 0.983587	valid's auc: 0.989206
[350]	train's auc: 0.983645	valid's auc: 0.989267
[360]	train's auc: 0.983698	valid's auc: 0.989295
[370]	train's auc: 0.983742	valid's auc: 0.989371
[380]	train's auc: 0.983795	valid's auc: 0.989415
[390]	train's auc: 0.983829	valid's auc: 0.989453
[400]	train's auc: 0.983865	valid's auc: 0.989463
[410]	train's auc: 0.983904	valid's auc: 0.989476
[420]	train's auc: 0.983955	valid's auc: 0.989497
[430]	train's auc: 0.983991	valid's auc: 0.989565
[440]	train's auc: 0.984026	valid's auc: 0.989614
[450]	train's auc: 0.984062	valid's auc: 0.989634
[460]	train's auc: 0.984087	valid's auc: 0.989644
[470]	train's auc: 0.984119	valid's auc: 0.989654
[480]	train's auc: 0.984157	valid's auc: 0.989663
[490]	train's auc: 0.984182	valid's auc: 0.989671
[500]	train's auc: 0.984214	valid's auc: 0.989668
[510]	train's auc: 0.984243	valid's auc: 0.989681
[520]	train's auc: 0.984269	valid's auc: 0.989684
[530]	train's auc: 0.9843	valid's auc: 0.989699
[540]	train's auc: 0.984331	valid's auc: 0.989738
[550]	train's auc: 0.984354	valid's auc: 0.989734
[560]	train's auc: 0.984379	valid's auc: 0.989744
[570]	train's auc: 0.984403	valid's auc: 0.989742
[580]	train's auc: 0.984426	valid's auc: 0.989753
[590]	train's auc: 0.984452	valid's auc: 0.989771
[600]	train's auc: 0.984477	valid's auc: 0.989784
[610]	train's auc: 0.984501	valid's auc: 0.989806
[620]	train's auc: 0.984523	valid's auc: 0.989817
[630]	train's auc: 0.984548	valid's auc: 0.989839
[640]	train's auc: 0.984566	valid's auc: 0.989849
[650]	train's auc: 0.984588	valid's auc: 0.989845
[660]	train's auc: 0.984605	valid's auc: 0.989843
[670]	train's auc: 0.984627	valid's auc: 0.989851
[680]	train's auc: 0.984647	valid's auc: 0.98987
[690]	train's auc: 0.984668	valid's auc: 0.989874
[700]	train's auc: 0.984687	valid's auc: 0.989884
[710]	train's auc: 0.984709	valid's auc: 0.989909
[720]	train's auc: 0.984726	valid's auc: 0.989912
[730]	train's auc: 0.984748	valid's auc: 0.989914
[740]	train's auc: 0.984768	valid's auc: 0.989916
[750]	train's auc: 0.984786	valid's auc: 0.989914
[760]	train's auc: 0.984803	valid's auc: 0.989925
[770]	train's auc: 0.98482	valid's auc: 0.989924
[780]	train's auc: 0.984836	valid's auc: 0.989928
[790]	train's auc: 0.984853	valid's auc: 0.989928
[800]	train's auc: 0.984868	valid's auc: 0.989954
[810]	train's auc: 0.984882	valid's auc: 0.98995
[820]	train's auc: 0.984898	valid's auc: 0.989942
[830]	train's auc: 0.984913	valid's auc: 0.989937
Early stopping, best iteration is:
[800]	train's auc: 0.984868	valid's auc: 0.989954

Model Report
bst1.best_iteration:  800
auc: 0.9899540809643534
[20045.464745283127]: model training time
Plot feature importances...
Predicting...
writing...
done...
