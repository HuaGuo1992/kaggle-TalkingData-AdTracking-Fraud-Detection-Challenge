/home/guohuajiaohuazi/anaconda3/lib/python3.6/site-packages/sklearn/cross_validation.py:41: DeprecationWarning: This module was deprecated in version 0.18 in favor of the model_selection module into which all the refactored classes and functions are moved. Also note that the interface of the new CV iterators are different from that of this module. This module will be removed in 0.20.
  "This module will be removed in 0.20.", DeprecationWarning)
/home/guohuajiaohuazi/anaconda3/lib/python3.6/site-packages/lightgbm/basic.py:1036: UserWarning: Using categorical_feature in Dataset.
  warnings.warn('Using categorical_feature in Dataset.')
/home/guohuajiaohuazi/anaconda3/lib/python3.6/site-packages/lightgbm/basic.py:681: UserWarning: categorical_feature in param dict is overrided.
  warnings.warn('categorical_feature in param dict is overrided.')
loading train data... 144903890 184903890
loading test data...
Extracting new features...
(40000000, 10)
shape of train:  (40000000, 10)
shape of test:  (18790469, 10)
selcols ['ip', 'channel'] QQ 4
selcols ['ip', 'device', 'os', 'app'] QQ 4
selcols ['ip', 'app', 'device', 'os'] QQ NC
selcols ['device', 'os'] QQ 4
variables and data type: 
<class 'pandas.core.frame.DataFrame'>
Int64Index: 58790469 entries, 0 to 58790468
Data columns (total 15 columns):
Unnamed: 0             float64
app                    uint16
channel                uint16
channel_confRate       float64
click_id               float64
click_time             int32
device                 uint16
hour                   uint8
ip                     uint32
is_attributed          float64
os                     uint16
ip_channel_4           int64
ip_device_os_app_4     int64
ip_app_device_os_NC    float32
device_os_4            int64
dtypes: float32(1), float64(4), int32(1), int64(3), uint16(4), uint32(1), uint8(1)
memory usage: 4.7 GB
predictors ['channel_confRate', 'ip_channel_4', 'ip_device_os_app_4', 'ip_app_device_os_NC', 'device_os_4', 'ip', 'app', 'os', 'channel', 'device', 'hour']
train size:  37500000
valid size:  2500000
test size :  18790469
Training...
preparing validation datasets
Training until validation scores don't improve for 30 rounds.
[10]	train's auc: 0.965398	valid's auc: 0.976181
[20]	train's auc: 0.968321	valid's auc: 0.97752
[30]	train's auc: 0.971199	valid's auc: 0.97781
[40]	train's auc: 0.97326	valid's auc: 0.979877
[50]	train's auc: 0.974957	valid's auc: 0.981147
[60]	train's auc: 0.976503	valid's auc: 0.982351
[70]	train's auc: 0.977738	valid's auc: 0.983244
[80]	train's auc: 0.978538	valid's auc: 0.983841
[90]	train's auc: 0.979175	valid's auc: 0.984635
[100]	train's auc: 0.97964	valid's auc: 0.985117
[110]	train's auc: 0.979996	valid's auc: 0.985604
[120]	train's auc: 0.980299	valid's auc: 0.985931
[130]	train's auc: 0.980616	valid's auc: 0.98617
[140]	train's auc: 0.980938	valid's auc: 0.986617
[150]	train's auc: 0.98114	valid's auc: 0.986847
[160]	train's auc: 0.981305	valid's auc: 0.987062
[170]	train's auc: 0.981476	valid's auc: 0.987191
[180]	train's auc: 0.981687	valid's auc: 0.987439
[190]	train's auc: 0.981846	valid's auc: 0.987601
[200]	train's auc: 0.981971	valid's auc: 0.987723
[210]	train's auc: 0.982096	valid's auc: 0.987814
[220]	train's auc: 0.982229	valid's auc: 0.987978
[230]	train's auc: 0.982327	valid's auc: 0.988029
[240]	train's auc: 0.982402	valid's auc: 0.98809
[250]	train's auc: 0.982523	valid's auc: 0.988163
[260]	train's auc: 0.982638	valid's auc: 0.988234
[270]	train's auc: 0.982705	valid's auc: 0.988292
[280]	train's auc: 0.982785	valid's auc: 0.98848
[290]	train's auc: 0.982872	valid's auc: 0.988564
[300]	train's auc: 0.982959	valid's auc: 0.988658
[310]	train's auc: 0.983021	valid's auc: 0.988702
[320]	train's auc: 0.98308	valid's auc: 0.988703
[330]	train's auc: 0.983135	valid's auc: 0.988741
[340]	train's auc: 0.983189	valid's auc: 0.988758
[350]	train's auc: 0.983234	valid's auc: 0.988815
[360]	train's auc: 0.983282	valid's auc: 0.988849
[370]	train's auc: 0.983331	valid's auc: 0.988855
[380]	train's auc: 0.983396	valid's auc: 0.988897
[390]	train's auc: 0.983447	valid's auc: 0.988913
[400]	train's auc: 0.983498	valid's auc: 0.988994
[410]	train's auc: 0.983544	valid's auc: 0.989012
[420]	train's auc: 0.983586	valid's auc: 0.989038
[430]	train's auc: 0.983626	valid's auc: 0.989045
[440]	train's auc: 0.983664	valid's auc: 0.989045
[450]	train's auc: 0.983702	valid's auc: 0.989037
Early stopping, best iteration is:
[429]	train's auc: 0.983618	valid's auc: 0.989046

Model Report
bst1.best_iteration:  429
auc: 0.9890464247855053
[3970.3966360092163]: model training time
Plot feature importances...
Predicting...
writing...
done...
